(the-structure-of-the-systems)=
# The Structure of the Systems
The systems are stored in the data folder of the `system_template` Regolith filter. If your Regolith project uses the default configuration, it's `packs/data/system_template`. Every system has its own folder. You can nest the folders as you like. The System Template filter considers every folder that has the `_scope.json` and `_map.py` files inside as a root of a system. 

Some of the directories may be used to group multiple systems together. The group directories are marked with the `_group_scope.json` file.

_Example structure (important files are marked with â­):_
```
ğŸ“ system_template
  â­ scope.json
  â­ auto_map.json
  ğŸ“ [path/to/system]
    ğŸ“ examlpe_python_file.py
    ğŸ“ example_json_file.json
    ğŸ“ example_file.example_extension
    â­ _scope.json
    â­ _map.py
  ğŸ“ [path/to/group/of/systems]
    â­ _group_scope.json
    ğŸ“ [path/to/system]
      ...
    ğŸ“ [path/to/system]
      ...
```

## auto_map.json
The auto map is used to map file extensions used in the systems to the output paths in Resource and Behavior Packs. You can read more about AUTO mapping in the {ref}`AUTO mapping<auto-mapping>` section, if you want to learn more about customizing the auto mapping with the `auto_map.json` file, read the {ref}`Custom AUTO Mapping<custom-auto-mapping>` section.

## _map.py
The `_map.py` file is one of the most important files in every system. The map file together with the `_scope.json` file are required for the directory to be considered a system. The `_map.py` file maps the files inside the system into their output paths. It also defines how the files should be handled in case of conflicts (multiple files mapped to the same output path) and lets you enable/disable some file generation features. You can read more about the `_map.py` file in the {ref}`The _map.py File<the-mappy-file>` section.

## _scope.json (system)
The `_scope.json` file of a system defines variables that can be used in the `_map.py` file and some other files generated by the System Template. Together with the `_map.py` file, the `_scope.json` file is required for the directory to be considered a system. You can read more about the `_scope.json` file in the {ref}`Scopes and Variables<scopes-and-variables>` section.

## scope.json (global)
The `scope.json` is the global scope file with variables accessible from all systems. It doesn't necessarily have to be in the root folder of the `system_template` filter. It's possible to configure the System Template to use a different file (see {ref}`Installation And Configuration<installation-and-configuration>` section). You can read more about the scopes in the {ref}`Scopes and Variables<scopes-and-variables>` section.

## _group_scope.json
Group scope is a special scope file that defines variables for all systems inside a group. It also marks the root folder of the group. You can read more about the scopes in the {ref}`Scopes and Variables<scopes-and-variables>` section.

## Other Files
Other files in the example structure would typically contain similar content to the files you would normally put in your Resource or Behavior Pack but organized in a way. These files are the building blocks of the systems. System Template exports them to the RP/BP folders according to the `_map.py` file.
